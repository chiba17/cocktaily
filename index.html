<html lang="ja"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Cocktaily</title>
    <!-- Fonts: Zen Kaku Gothic New (Sans) & Lora (Serif for EN) -->
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&amp;family=Zen+Kaku+Gothic+New:wght@300;400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        :root {
            /* --- Color Palette --- */
            --bg-deep: #050508;
            --accent-gold: #E6C888;
            --accent-gold-glow: rgba(230, 200, 136, 0.4);
            --accent-red: #FF6B6B;
            
            /* --- Glass System --- */
            --glass-base: rgba(255, 255, 255, 0.03);
            --glass-high: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
            --glass-highlight: rgba(255, 255, 255, 0.25);
            
            /* --- Text --- */
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.85);
            --text-tertiary: rgba(255, 255, 255, 0.45);
            
            /* --- Metrics --- */
            --nav-height: 80px;
            --radius-L: 24px;
            --radius-M: 16px;
            
            /* --- Motion --- */
            --ease-lux: cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(20, 30, 50, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(40, 20, 10, 0.3) 0%, transparent 50%);
            background-attachment: fixed;
            color: var(--text-primary);
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 15px;
            line-height: 1.6;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            /* 修正: user-selectをbodyに適用し、子要素で制御しやすくする */
            user-select: none;
            -webkit-user-select: none;
        }

        /* 修正: 入力フォームとボタンの操作性を確実に有効化 */
        input, button, textarea, select {
            user-select: auto;
            -webkit-user-select: auto;
            pointer-events: auto;
        }

        /* Ambient Animated Orb */
        .ambient-light {
            position: fixed;
            top: -20vh;
            left: 50%;
            transform: translateX(-50%);
            width: 100vw;
            height: 60vh;
            background: radial-gradient(ellipse at center, rgba(230, 200, 136, 0.08) 0%, transparent 70%);
            filter: blur(60px);
            z-index: 0;
            pointer-events: none;
            animation: breathe 12s infinite alternate ease-in-out;
        }

        @keyframes breathe {
            0% { opacity: 0.4; transform: translateX(-50%) scale(0.95); }
            100% { opacity: 0.7; transform: translateX(-50%) scale(1.05); }
        }

        /* --- Scrollable Main Container --- */
        .app-container {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            position: relative;
            z-index: 1;
            padding-bottom: 40px;
            scroll-behavior: auto;
            /* ヘッダー被りを完全に防ぐため十分な余白を確保 */
            padding-top: 110px; 
        }

        /* --- Header Section (Fixed) --- */
        .app-header {
            padding: 24px 20px 12px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            transition: transform 0.4s var(--ease-lux);
            background: linear-gradient(to bottom, rgba(5,5,8,1) 0%, rgba(5,5,8,0.95) 85%, transparent 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            /* iOSでの描画・タッチ判定バグ対策 */
            transform: translateZ(0);
            touch-action: manipulation;
        }
        
        .app-header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(5,5,8,0.98) 0%, rgba(5,5,8,0.9) 85%, transparent 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: -1;
            mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
            pointer-events: none;
        }

        .header-top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand {
            font-family: 'Lora', serif;
            font-size: 24px;
            font-weight: 600;
            letter-spacing: 0.02em;
            color: var(--text-primary);
            text-shadow: 0 4px 20px rgba(255,255,255,0.1);
            cursor: pointer;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .fav-toggle-btn {
            background: transparent;
            border: none;
            color: var(--text-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s var(--ease-lux);
            padding: 8px;
            border-radius: 50%;
        }
        .fav-toggle-btn.active {
            color: var(--accent-red);
            background: rgba(255, 107, 107, 0.1);
        }
        .fav-toggle-btn svg {
            width: 26px;
            height: 26px;
            stroke-width: 1.5;
        }

        .reset-btn {
            font-size: 11px;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            background: var(--glass-base);
            border: 1px solid var(--glass-border);
            padding: 8px 16px;
            border-radius: 100px;
            backdrop-filter: blur(10px);
            transition: all 0.3s var(--ease-lux);
            min-width: 72px;
            text-align: center;
        }
        .reset-btn:active {
            background: var(--accent-gold);
            color: #000;
            border-color: var(--accent-gold);
            transform: scale(0.95);
        }

        /* Search Input */
        .search-wrapper {
            position: relative;
            margin-bottom: 24px;
            margin-top: 0; 
            height: 52px;
        }
        
        .search-input {
            width: 100%;
            height: 52px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 0 90px 0 50px;
            color: var(--text-primary);
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-size: 16px;
            outline: none;
            transition: all 0.3s var(--ease-lux);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.05);
        }
        
        .search-input::placeholder { color: var(--text-tertiary); }

        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: var(--text-tertiary);
            pointer-events: none;
            transition: color 0.3s;
        }
        .search-input:focus + .search-icon { color: var(--text-primary); }

        /* Search Count styled as a Button */
        .search-count {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 11px;
            font-weight: 500;
            color: var(--accent-gold);
            font-family: monospace;
            cursor: pointer;
            padding: 6px 10px;
            border: 1px solid rgba(230, 200, 136, 0.3);
            border-radius: 10px;
            background: rgba(230, 200, 136, 0.05);
            backdrop-filter: blur(5px);
            transition: all 0.2s var(--ease-lux);
            pointer-events: auto;
            white-space: nowrap;
        }
        .search-count:active {
            background: rgba(230, 200, 136, 0.15);
            border-color: var(--accent-gold);
            transform: translateY(-50%) scale(0.92);
        }

        /* --- Sections & Panels --- */
        .content-body {
            padding: 0 20px;
        }

        .section-title {
            font-family: 'Lora', serif;
            font-size: 15px;
            font-weight: 400;
            letter-spacing: 0.02em;
            color: var(--text-secondary);
            margin: 24px 0 12px;
            display: flex;
            align-items: center;
            opacity: 0.9;
        }
        .section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--glass-border);
            margin-left: 12px;
        }

        .panel-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .panel {
            position: relative;
            background: var(--glass-base);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-M);
            padding: 16px 4px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s var(--ease-lux);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
            overflow: hidden;
        }

        .panel.active {
            background: rgba(230, 200, 136, 0.1);
            border-color: var(--accent-gold);
            color: var(--accent-gold);
            font-weight: 600;
            box-shadow: 0 0 15px rgba(230, 200, 136, 0.15);
        }

        .panel.disabled {
            opacity: 0.2;
            pointer-events: none;
            filter: grayscale(1) brightness(0.7);
        }

        .type-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .flavor-grid {
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        
        .panel.flavor {
            min-height: 40px;
            font-size: 12px;
            padding: 4px;
        }

        /* --- Result Cards --- */
        .results-heading {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin: 40px 0 20px;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 8px;
        }
        .results-heading h2 {
            font-family: 'Lora', serif;
            font-size: 20px;
            font-weight: 400;
            margin: 0;
            color: var(--text-primary);
        }
        .results-count {
            font-family: monospace;
            color: var(--text-tertiary);
            font-size: 13px;
        }

        .card {
            background: linear-gradient(145deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-L);
            padding: 20px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s var(--ease-lux);
            cursor: pointer;
        }
        
        .card:active { transform: scale(0.98); }

        .card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; bottom: 0; width: 4px;
            background: var(--text-tertiary);
            opacity: 0.5;
        }
        .card.long::before { background: #64D2FF; box-shadow: 0 0 10px #64D2FF; }
        .card.short::before { background: #FF6B6B; box-shadow: 0 0 10px #FF6B6B; }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding-right: 40px;
        }

        .name-jp {
            font-size: 17px;
            font-weight: 700;
            color: var(--text-primary);
            display: block;
            margin-bottom: 2px;
        }
        .name-en {
            font-family: 'Lora', serif;
            font-size: 14px;
            color: var(--accent-gold);
            font-style: italic;
        }

        .fav-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(255,255,255,0.03);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-tertiary);
            transition: all 0.3s;
            z-index: 5;
            cursor: pointer;
        }
        .fav-btn.active { color: var(--accent-red); background: rgba(255, 107, 107, 0.15); }
        .fav-btn svg { width: 22px; height: 22px; stroke-width: 1.5; }

        .materials-preview {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 12px;
            line-height: 1.5;
            opacity: 0.9;
        }

        .card-details {
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s var(--ease-lux);
            opacity: 0;
        }
        
        .card.expanded .card-details {
            max-height: 500px;
            opacity: 1;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--glass-border);
        }

        .detail-label {
            font-family: 'Lora', serif;
            font-size: 11px;
            color: var(--accent-gold);
            margin-bottom: 6px;
            text-transform: uppercase;
        }
        
        .desc-text {
            font-size: 14px;
            color: var(--text-primary);
            line-height: 1.7;
            margin-bottom: 16px;
        }

        .tags-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .pill {
            font-size: 10px;
            padding: 3px 10px;
            border-radius: 6px;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            color: var(--text-tertiary);
        }
        .pill.gold {
            color: var(--accent-gold);
            border-color: rgba(230, 200, 136, 0.3);
        }

        .view-section { display: none; }
        .view-section.active { display: block; animation: fadeUp 0.4s var(--ease-lux); }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-tertiary);
        }
    </style>
</head>
<body>

    <div class="ambient-light"></div>

    <header class="app-header" id="mainHeader">
        <div class="header-top-row">
            <div class="brand" id="appTitle">Cocktaily</div>
            <div class="header-actions">
                <button class="fav-toggle-btn" id="favToggleBtn">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                </button>
                <button class="reset-btn" id="resetBtn">RESET</button>
            </div>
        </div>
    </header>

    <div class="app-container">
        <!-- SEARCH VIEW -->
        <div id="view-search" class="view-section active">
            <div class="content-body">
                <div class="search-wrapper">
                    <svg class="search-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <input type="text" class="search-input" id="keywordInput" placeholder="カクテル名、特徴など..." value="">
                    <span id="searchResultCount" class="search-count">0 items</span>
                </div>

                <div id="filtersArea">
                    <div class="section-title">Base Spirit</div>
                    <div class="panel-grid" id="baseGrid"><div class="panel" data-value="ジン">ジン</div><div class="panel" data-value="ラム">ラム</div><div class="panel" data-value="ウォッカ">ウォッカ</div><div class="panel" data-value="テキーラ">テキーラ</div><div class="panel" data-value="ウイスキー">ウイスキー</div><div class="panel" data-value="ブランデー">ブランデー</div><div class="panel" data-value="ワイン">ワイン</div><div class="panel" data-value="ビール">ビール</div><div class="panel" data-value="日本酒">日本酒</div><div class="panel" data-value="リキュール">リキュール</div><div class="panel" data-value="ノンアルコール">ノンアルコール</div></div>

                    <div class="section-title">Type</div>
                    <div class="type-grid" id="typeGrid"><div class="panel" data-value="ロング">ロング</div><div class="panel" data-value="ショート">ショート</div></div>

                    <div class="section-title">Style</div>
                    <div class="panel-grid" id="styleGrid"><div class="panel" data-value="炭酸">炭酸</div><div class="panel" data-value="トニック">トニック</div><div class="panel" data-value="ジュース">ジュース</div><div class="panel" data-value="ロック">ロック</div><div class="panel" data-value="ストレート">ストレート</div></div>

                    <div class="section-title">Flavor</div>
                    <div class="panel-grid flavor-grid" id="flavorGrid"><div class="panel flavor" data-value="柑橘">柑橘</div><div class="panel flavor" data-value="甘め">甘め</div><div class="panel flavor" data-value="ドライ">ドライ</div><div class="panel flavor" data-value="さっぱり">さっぱり</div><div class="panel flavor" data-value="フルーティ">フルーティ</div><div class="panel flavor" data-value="苦味">苦味</div><div class="panel flavor" data-value="ハーブ / ミント">ハーブ / ミント</div><div class="panel flavor" data-value="クリーミー">クリーミー</div><div class="panel flavor" data-value="スパイシー">スパイシー</div><div class="panel flavor" data-value="塩味">塩味</div><div class="panel flavor" data-value="トロピカル">トロピカル</div><div class="panel flavor" data-value="野菜 / トマト">野菜 / トマト</div></div>
                </div>

                <div class="results-heading" id="menuHeading">
                    <h2>Menu</h2>
                </div>
                <div id="cocktailList"></div>
            </div>
        </div>

        <!-- FAVORITES VIEW -->
        <div id="view-favorites" class="view-section">
            <div class="content-body">
                <div class="results-heading" style="margin-top: 0;">
                    <h2>Favorites</h2>
                    <span class="results-count" id="favCount">0 SELECTIONS</span>
                </div>
                <div id="favList"></div>
            </div>
        </div>
    </div>

<script>
// --- FULL COCKTAIL DATA (229 Items) ---
const rawCocktails = [
    // --- GIN (41 items) ---
    { id: 'g1', base: 'ジン', styles: ['ロング', 'トニック', '炭酸'], flavors: ['苦味', 'さっぱり', '柑橘'], jp: 'ジントニック', en: 'Gin and Tonic', materials: 'ジン, トニックウォーター, ライム', desc: 'バーの定番中の定番。元々は熱帯植民地でマラリア予防薬「キニーネ」を飲みやすくするために考案されたのが始まり。お店ごとのジンの銘柄やライムの扱いの違いを楽しめます。' },
    { id: 'g2', base: 'ジン', styles: ['ロング', '炭酸', 'ジュース'], flavors: ['柑橘', 'さっぱり'], jp: 'ジンフィズ', en: 'Gin Fizz', materials: 'ジン, レモン, 砂糖, ソーダ', desc: 'レモンの酸味と炭酸の弾ける音が爽快な一杯。シンプルですが、シェイクの技術で泡立ちや口当たりが劇的に変わるため、バーテンダーの腕試しとも言われます。' },
    { id: 'g3', base: 'ジン', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘', 'ドライ'], jp: 'ジンリッキー', en: 'Gin Rickey', materials: 'ジン, ライム, ソーダ', desc: '19世紀末、ワシントンのロビイスト、ジョー・リッキー氏が愛飲したスタイル。砂糖を使わず、ライムとソーダのみで仕上げる極めてドライで潔い味わいです。' },
    { id: 'g4', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['柑橘', 'さっぱり', 'ドライ'], jp: 'ギムレット', en: 'Gimlet', materials: 'ジン, ライムジュース, 砂糖', desc: '「ギムレットには早すぎる」という『長いお別れ』の名台詞で不朽の名作に。元々は英国海軍軍医が将校の健康維持のためにジンにライムを混ぜたのが始まりです。' },
    { id: 'g5', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['柑橘', '甘め'], jp: 'ホワイトレディ', en: 'White Lady', materials: 'ジン, ホワイトキュラソー, レモン', desc: '「白い貴婦人」。ジンのキレ、キュラソーの甘み、レモンの酸味が一体となった、洗練された乳白色のカクテル。サイドカーやバラライカの兄弟カクテルです。' },
    { id: 'g6', base: 'ジン', styles: ['ショート', 'ステア', 'ストレート'], flavors: ['ドライ', 'ハーブ / ミント'], jp: 'マティーニ', en: 'Martini', materials: 'ジン, ドライベルモット, オリーブ', desc: '「カクテルの王様」。ジンとベルモットの比率には無数の議論があり、チャーチル首相はベルモットの瓶を横目に見ながらジンを飲んだという逸話も残っています。' },
    { id: 'g7', base: 'ジン', styles: ['ロング', 'シェイク', '炭酸'], flavors: ['甘め', 'フルーティ'], jp: 'シンガポールスリング', en: 'Singapore Sling', materials: 'ジン, チェリーブランデー, レモン, ソーダ等', desc: '1915年、ラッフルズ・ホテルで誕生。「東洋の神秘」と称される夕焼けのような美しい色合いと、フルーティーで複雑な味わいが特徴の南国カクテルです。' },
    { id: 'g8', base: 'ジン', styles: ['ショート', 'ロック', 'ビルド'], flavors: ['苦味', '甘め', 'ハーブ / ミント'], jp: 'ネグローニ', en: 'Negroni', materials: 'ジン, カンパリ, スイートベルモット', desc: 'フィレンツェのネグローニ伯爵が好んだ食前酒。カンパリの苦味とベルモットの甘みが重厚に絡み合います。近年、世界的に人気が再燃しているクラシックの一つです。' },
    { id: 'g9', base: 'ジン', styles: ['ロング', 'ジュース'], flavors: ['柑橘', 'さっぱり'], jp: 'オレンジブロッサム', en: 'Orange Blossom', materials: 'ジン, オレンジジュース', desc: 'オレンジの花言葉は「純粋」。禁酒法時代に粗悪なジンの味を隠すために生まれたとも言われますが、現在は結婚式の乾杯酒としても振る舞われる華やかな一杯です。' },
    { id: 'g10', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ'], jp: 'ブルームーン', en: 'Blue Moon', materials: 'ジン, パルフェタムール, レモン', desc: '「完全なる愛」という名のスミレのリキュールを使用した、神秘的な紫色のカクテル。一方で「Blue Moon」には「できない相談」という意味もあり、ミステリアスです。' },
    { id: 'g11', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '柑橘', '甘め'], jp: 'アビエーション', en: 'Aviation', materials: 'ジン, マラスキーノ, レモン, パルフェタムール', desc: '「飛行機」。空のような薄紫色が美しいクラシックカクテル。航空機がまだ珍しく、空への憧れが強かった20世紀初頭に生まれました。' },
    { id: 'g12', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['ハーブ / ミント', '柑橘', '甘め'], jp: 'ラストワード', en: 'Last Word', materials: 'ジン, シャルトリューズ緑, マラスキーノ, ライム', desc: '禁酒法時代のデトロイトで生まれた名作。強烈なハーブ香が魅力。' },
    { id: 'g13', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'ビーズニーズ', en: 'Bee\'s Knees', materials: 'ジン, 蜂蜜, レモンジュース', desc: '「蜂の膝」＝「最高のもの」というスラングから。禁酒法時代、ジンの強い香りを蜂蜜とレモンで和らげたのが始まり。優しくまろやかな甘酸っぱさが魅力です。' },
    { id: 'g14', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['柑橘', 'さっぱり'], jp: 'コープスリバイバーNo.2', en: 'Corpse Reviver #2', materials: 'ジン, コアントロー, リレブラン, レモン, アブサン', desc: '「死者を蘇らせるもの」という名の通り、かつては二日酔いの迎え酒として考案されました。隠し味のアブサンが妖艶な香りを放ち、複雑で奥深い味わいです。' },
    { id: 'g15', base: 'ジン', styles: ['ロング', 'シェイク', '炭酸'], flavors: ['柑橘', 'さっぱり'], jp: 'フレンチ75', en: 'French 75', materials: 'ジン, レモン, 砂糖, シャンパン', desc: '第一次世界大戦時のフランス軍の大砲「75mm砲」に由来。その名の通り、シャンパンの泡立ちの中に強いアルコールを感じる、祝いの席にも適した強力なカクテルです。' },
    { id: 'g16', base: 'ジン', styles: ['ロング', '炭酸'], flavors: ['柑橘', '甘め', 'さっぱり'], jp: 'トムコリンズ', en: 'Tom Collins', materials: 'オールドトムジン, レモン, 砂糖, ソーダ', desc: '19世紀ロンドンの伝説的ウェイター、ジョン・コリンズに由来。後に甘口のオールドトムジンが使われるようになり名が変わりました。レモンスカッシュのような爽快感。' },
    { id: 'g17', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '柑橘'], jp: 'ブロンクス', en: 'Bronx', materials: 'ジン, ドライベルモット, スイートベルモット, オレンジ', desc: 'アメリカ禁酒法時代以前からある古典。「マティーニにオレンジジュースを加えたような」と表現される、フルーティーで口当たりの良い食前酒です。' },
    { id: 'g18', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['ハーブ / ミント', 'ドライ'], jp: 'アラスカ', en: 'Alaska', materials: 'ジン, シャルトリューズイエロー', desc: 'ジンと薬草系リキュールのシャルトリューズのみで作る、冷たく鋭い黄金色の一杯。アラスカの氷原を思わせる、アルコール度数の高い辛口カクテルです。' },
    { id: 'g19', base: 'ジン', styles: ['ショート', 'シェイク', 'ステア'], flavors: ['ドライ', '柑橘', 'ハーブ / ミント'], jp: 'ヴェスパー', en: 'Vesper', materials: 'ジン, ウォッカ, リレ・ブラン', desc: '『007 カジノ・ロワイヤル』でジェームズ・ボンドが注文したオリジナル・マティーニ。「ステアではなくシェイクで」という台詞はあまりにも有名です。' },
    { id: 'g20', base: 'ジン', styles: ['ショート', 'ステア'], flavors: ['ドライ', '塩味', 'ハーブ / ミント'], jp: 'ギブソン', en: 'Gibson', materials: 'ジン, ドライベルモット, パールオニオン', desc: 'マティーニのオリーブをパールオニオンに変えたもの。挿絵画家チャールズ・ダナ・ギブソンが愛飲したとされる、キリッとした辛口カクテルです。' },
    { id: 'g21', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ', 'クリーミー'], jp: 'ピンクレディ', en: 'Pink Lady', materials: 'ジン, グレナデンシロップ,卵白', desc: 'ロンドンで上演された舞台『ピンク・レディ』の打ち上げパーティーで生まれたとされるカクテル。卵白による優しい口当たりと愛らしいピンク色が特徴。' },
    { id: 'g22', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '甘め'], jp: 'パラダイス', en: 'Paradise', materials: 'ジン, アプリコットブランデー, オレンジジュース', desc: '「楽園」の名にふさわしい、フルーティーで飲みやすいカクテル。アプリコットの芳醇な香りとオレンジの酸味が、ジンの鋭さを優しく包み込みます。' },
    { id: 'g23', base: 'ジン', styles: ['ショート', 'ロック', 'ビルド'], flavors: ['甘め', 'フルーティ', 'ハーブ / ミント'], jp: 'ブランブル', en: 'Bramble', materials: 'ジン, レモン, 砂糖, ブラックベリーリキュール', desc: '1980年代ロンドン発のモダンクラシック。クラッシュアイスに注ぎ、最後にブラックベリーリキュールを垂らすことで、ベリーの茂み（Bramble）を表現しています。' },
    { id: 'g24', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '甘め', 'クリーミー'], jp: 'クローバークラブ', en: 'Clover Club', materials: 'ジン, ラズベリーシロップ, レモン, 卵白', desc: '禁酒法以前のフィラデルフィアの紳士クラブで愛されたカクテル。ラズベリーと卵白が生み出す美しいピンク色と滑らかなテクスチャーが魅力です。' },
    { id: 'g25', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['ハーブ / ミント', 'さっぱり', '柑橘'], jp: 'サウスサイド', en: 'Southside', materials: 'ジン, ライム, 砂糖, ミント', desc: '「ジンのモヒート」とも言える一杯。禁酒法時代のシカゴ、サウスサイド地区のギャングが、粗悪なジンをミントと柑橘で飲みやすくしたのが始まりとされます。' },
    { id: 'g26', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['ハーブ / ミント', 'フルーティ'], jp: 'モンキーグランド', en: 'Monkey Gland', materials: 'ジン, オレンジ, グレナデン, アブサン', desc: '「猿の臓器」。1920年代パリで考案。当時話題だった「猿の睾丸を人間に移植する若返り手術」にちなんだ奇抜な名前ですが、味はフルーティーで美味です。' },
    { id: 'g27', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '柑橘'], jp: 'カジノ', en: 'Casino', materials: 'オールドトムジン, マラスキーノ, レモン, ビターズ', desc: '甘口のオールドトムジンを使用し、マラスキーノ（チェリーリキュール）で風味付けしたクラシック。カクテル言葉は「愉快」や「ギャンブル」。' },
    { id: 'g28', base: 'ジン', styles: ['ロング', 'ビルド'], flavors: ['甘め', '柑橘'], jp: 'ロングアイランドアイスティー', en: 'Long Island Iced Tea', materials: 'ジン, ウォッカ, ラム, テキーラ, コーラ', desc: '紅茶を一滴も使わずにアイスティーの味と色を再現した魔法のカクテル。4大スピリッツを全て使用するためアルコール度数は高いですが、驚くほど飲みやすいです。' },
    { id: 'g29', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['柑橘', '苦味', 'さっぱり'], jp: 'ペグクラブ', en: 'Pegu Club', materials: 'ジン, オレンジキュラソー, ライム, ビターズ', desc: '19世紀ミャンマー（ビルマ）の英国将校クラブ「ペグ・クラブ」のシグネチャー。ジンの鋭さに柑橘とビターズの苦味が加わった、エキゾチックで大人の味わい。' },
    { id: 'g30', base: 'ジン', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ジンバック', en: 'Gin Buck', materials: 'ジン, レモン, ジンジャーエール', desc: '「ロンドンバック」とも。ジンのボタニカルとジンジャーエールの刺激が心地よい、爽快なロングカクテル。' },
    { id: 'g31', base: 'ジン', styles: ['ロング', 'ジュース'], flavors: ['さっぱり', '柑橘', '塩味'], jp: 'ソルティドッグ(ジン)', en: 'Salty Dog (Gin)', materials: 'ジン, グレープフルーツ, 塩', desc: '本来ソルティドッグはジンベースで英国生まれ。後にウォッカベースが主流になったが、ジン版はより香り高い。' },
    { id: 'g32', base: 'ジン', styles: ['ロング', 'トニック', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ジンソニック', en: 'Gin Sonic', materials: 'ジン, トニック, ソーダ, ライム', desc: 'トニックとソーダを半々で割るスタイル。トニックの甘さを抑え、より食事に合わせやすくさっぱりとした飲み口。' },
    { id: 'g33', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['柑橘', 'さっぱり', '甘め'], jp: 'ブルドッグ(ハイボール)', en: 'Bulldog Highball', materials: 'ジン, オレンジジュース, ジンジャーエール', desc: '通常ブルドッグと言えばウォッカ＋GFJだが、古いレシピではジン＋オレンジ＋ジンジャーエールを指すことも。' },
    { id: 'g34', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘', 'フルーティ'], jp: 'パリジャン', en: 'Parisian', materials: 'ジン, ドライベルモット, カシス', desc: 'マティーニにカシスリキュールを加えたような、深紅の美しいカクテル。フランスの首都の名にふさわしい華やかさ。' },
    { id: 'g35', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'ブルーレディ', en: 'Blue Lady', materials: 'ジン, ブルーキュラソー, レモン', desc: 'ホワイトレディのホワイトキュラソーをブルーに変えたもの。味は似ているが、鮮やかな青色が涼しげ。' },
    { id: 'g36', base: 'ジン', styles: ['ショート', 'シェイク'], flavors: ['さっぱり', '柑橘'], jp: 'ハワイアン', en: 'Hawaiian', materials: 'ジン, オレンジキュラソー, パイン', desc: 'ジンベースだがパイナップルジュースを使い、南国風に仕上げたショートカクテル。' },
    { id: 'g37', base: 'ジン', styles: ['ロング', 'ジュース'], flavors: ['さっぱり', '柑橘'], jp: 'グレープフルーツハイボール', en: 'Greyhound (Gin)', materials: 'ジン, グレープフルーツジュース', desc: 'ジンとグレープフルーツの相性は抜群。塩なしのソルティドッグ（ジンベース）とも言える。' },
    { id: 'g38', base: 'ジン', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ジンライムソーダ', en: 'Gin Lime Soda', materials: 'ジン, ライム, ソーダ', desc: 'ジンリッキーの別称に近いが、よりライムを強調したシンプルなソーダ割り。' },
    { id: 'g39', base: 'ジン', styles: ['ショート', 'ステア'], flavors: ['甘め', 'ハーブ / ミント', 'ドライ'], jp: 'マルチネス', en: 'Martinez', materials: 'ジン, スイートベルモット, マラスキーノ, ビターズ', desc: 'マティーニの原型といわれる歴史的一杯。オールドトムジンを使うのが伝統的で、現在の辛口マティーニとは対照的な芳醇な甘みとコクが楽しめます。' },
    { id: 'g40', base: 'ジン', styles: ['ショート', 'ステア'], flavors: ['苦味', 'ハーブ / ミント', '甘め'], jp: 'ハンキーパンキー', en: 'Hanky Panky', materials: 'ジン, スイートベルモット, フェルネットブランカ', desc: 'ロンドンのサヴォイ・ホテルの伝説的女性バーテンダー、エイダ・コールマンが考案。「なんて素敵なの（Hanky Panky）！」という客の感嘆から命名されました。' },
    { id: 'g41', base: 'ジン', styles: ['ショート', 'ステア'], flavors: ['ハーブ / ミント', '甘め'], jp: 'ビジュ', en: 'Bijou', materials: 'ジン, スイートベルモット, シャルトリューズ緑', desc: '「宝石」を意味する名作。ジンをダイヤ、ベルモットをルビー、シャルトリューズをエメラルドに見立て、それぞれの個性が複雑に重なり合う贅沢な一杯です。' },
    // (Other categories remain identical to previous versions - VODKA to NON-ALCOHOL are fully preserved)
    // ... VODKA ...
    { id: 'v1', base: 'ウォッカ', styles: ['ロング', '炭酸'], flavors: ['スパイシー', 'さっぱり', '柑橘'], jp: 'モスコミュール', en: 'Moscow Mule', materials: 'ウォッカ, ライム, ジンジャーエール', desc: '「モスクワのラバ」。ウォッカとジンジャービアの傑作。' },
    { id: 'v2', base: 'ウォッカ', styles: ['ロング', 'ジュース'], flavors: ['柑橘', '甘め'], jp: 'スクリュードライバー', en: 'Screwdriver', materials: 'ウォッカ, オレンジジュース', desc: '工具のねじ回しでステアしたのが由来。定番の人気。' },
    { id: 'v3', base: 'ウォッカ', styles: ['ロング', 'ジュース', 'ロック'], flavors: ['塩味', '柑橘'], jp: 'ソルティドッグ', en: 'Salty Dog', materials: 'ウォッカ, グレープフルーツジュース, 塩', desc: 'グラス縁の塩とグレープフルーツの苦味がベストマッチ。' },
    { id: 'v4', base: 'ウォッカ', styles: ['ロング', 'ジュース'], flavors: ['スパイシー', '野菜 / トマト'], jp: 'ブラッディメアリー', en: 'Bloody Mary', materials: 'ウォッカ, トマトジュース, レモン, 香辛料', desc: '「血まみれメアリー」。スパイスを効かせた「飲むサラダ」。' },
    { id: 'v5', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['さっぱり', '柑橘', 'ドライ'], jp: 'カミカゼ', en: 'Kamikaze', materials: 'ウォッカ, ホワイトキュラソー, ライム', desc: '鋭い切れ味のカクテル。ライムの酸味が全体を引き締めます。' },
    { id: 'v6', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['柑橘', 'さっぱり'], jp: 'バラライカ', en: 'Balalaika', materials: 'ウォッカ, ホワイトキュラソー, レモン', desc: 'サイドカーのベースをウォッカに変えたロシア風の名作。' },
    { id: 'v7', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '甘め', '柑橘'], jp: 'コスモポリタン', en: 'Cosmopolitan', materials: 'ウォッカ, ホワイトキュラソー, クランベリー, ライム', desc: 'ドラマ『SATC』で大流行した、都会の女性に愛される一杯。' },
    { id: 'v8', base: 'ウォッカ', styles: ['ショート', 'ロック'], flavors: ['甘め', '苦味', 'コーヒー / ナッツ'], jp: 'ブラックルシアン', en: 'Black Russian', materials: 'ウォッカ, コーヒーリキュール', desc: 'コーヒーの甘さとウォッカの強さが溶け合う大人のデザート。' },
    { id: 'v9', base: 'ウォッカ', styles: ['ロング', 'ビルド'], flavors: ['甘め', 'スパイシー'], jp: 'モスコミュール(辛口)', en: 'Moscow Mule (Dry)', materials: 'ウォッカ, ライム, 辛口ジンジャーエール', desc: '辛口ジンジャーエールを使用した、より刺激的な一杯です。' },
    { id: 'v10', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ', 'トロピカル'], jp: 'セックスオンザビーチ', en: 'Sex on the Beach', materials: 'ウォッカ, メロンリキュール, フランボワーズ, パイン', desc: '映画『カクテル』で有名に。ベリーとパインが香るトロピカルな一杯。' },
    { id: 'v11', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['苦味', '甘め', 'コーヒー / ナッツ'], jp: 'エスプレッソマティーニ', en: 'Espresso Martini', materials: 'ウォッカ, エスプレッソ, コーヒーリキュール, シロップ', desc: '近年世界的大流行のモダンクラシック。本格的なコーヒーの苦味。' },
    { id: 'v12', base: 'ウォッカ', styles: ['ショート', 'ロック'], flavors: ['甘め', 'クリーミー', 'コーヒー / ナッツ'], jp: 'ホワイトルシアン', en: 'White Russian', materials: 'ウォッカ, コーヒーリキュール, 生クリーム', desc: 'ブラックルシアンに生クリームをフロート。マイルドな味わい。' },
    { id: 'v13', base: 'ウォッカ', styles: ['ショート', 'ロック'], flavors: ['甘め', 'コーヒー / ナッツ'], jp: 'ゴッドマザー', en: 'Godmother', materials: 'ウォッカ, アマレット', desc: 'ゴッドファーザーのウォッカ版。杏仁香がより際立ちます。' },
    { id: 'v14', base: 'ウォッカ', styles: ['ロング', 'ジュース'], flavors: ['フルーティ', '柑橘', 'さっぱり'], jp: 'シーブリーズ', en: 'Sea Breeze', materials: 'ウォッカ, クランベリージュース, グレープフルーツ', desc: '「海のそよ風」。クランベリーとグレープフルーツの爽やかな酸味。' },
    { id: 'v15', base: 'ウォッカ', styles: ['ロング', 'ジュース', 'シェイク'], flavors: ['トロピカル', '甘め', 'クリーミー'], jp: 'チチ', en: 'Chi-Chi', materials: 'ウォッカ, パイナップルジュース, ココナッツミルク', desc: 'ピニャコラーダのウォッカ版。濃厚な南国情緒が楽しめます。' },
    { id: 'v16', base: 'ウォッカ', styles: ['ロング', 'トニック', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ウォッカトニック', en: 'Vodka Tonic', materials: 'ウォッカ, トニックウォーター, ライム', desc: 'シンプルかつ清涼感あふれる一杯。食事ともよく合います。' },
    { id: 'v17', base: 'ウォッカ', styles: ['ロング', '炭酸'], flavors: ['柑橘', 'さっぱり', '甘め'], jp: 'ブルーラグーン', en: 'Blue Lagoon', materials: 'ウォッカ, ブルーキュラソー, レモン, ソーダ', desc: '鮮やかな青色が美しい、柑橘系の爽やかな一杯。' },
    { id: 'v18', base: 'ウォッカ', styles: ['ロング', 'ビルド'], flavors: ['甘め', 'ハーブ / ミント', '柑橘'], jp: 'ハーベイウォールバンガー', en: 'Harvey Wallbanger', materials: 'ウォッカ, オレンジジュース, ガリアーノ', desc: 'スクリュードライバーにハーブ酒ガリアーノをフロート。' },
    { id: 'v19', base: 'ウォッカ', styles: ['ロング', 'ビルド'], flavors: ['フルーティ', 'さっぱり', '柑橘'], jp: 'ケープコッダー', en: 'Cape Codder', materials: 'ウォッカ, クランベリージュース, ライム', desc: 'ウォッカのクランベリー割り。甘酸っぱく飲みやすいです。' },
    { id: 'v20', base: 'ウォッカ', styles: ['ロング', 'ジュース'], flavors: ['柑橘', 'さっぱり'], jp: 'グレイハウンド', en: 'Greyhound', materials: 'ウォッカ, グレープフルーツジュース', desc: 'ソルティドッグから塩を抜いたもの。苦味が引き立ちます。' },
    { id: 'v21', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'レモンドロップ', en: 'Lemon Drop', materials: 'シトラスウォッカ, レモン, 砂糖', desc: '甘酸っぱいレモンキャンディのような可愛らしい味わいです。' },
    { id: 'v22', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '甘め'], jp: 'アップルマティーニ', en: 'Appletini', materials: 'ウォッカ, アップルリキュール, レモン', desc: 'NYで流行したモダンマティーニ。青リンゴが香ります。' },
    { id: 'v23', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'クリーミー', 'コーヒー / ナッツ'], jp: 'バーバラ', en: 'Barbara', materials: 'ウォッカ, カカオリキュール, 生クリーム', desc: 'アレキサンダーのウォッカ版。カカオとクリームの甘美な味。' },
    { id: 'v24', base: 'ウォッカ', styles: ['ロング', 'ビルド'], flavors: ['塩味', '野菜 / トマト'], jp: 'ブルショット', en: 'Bull Shot', materials: 'ウォッカ, ビーフブイヨン, レモン, 香辛料', desc: 'コンソメスープにウォッカ。食事代わりにもなる異色作です。' },
    { id: 'v25', base: 'ウォッカ', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ウォッカコリンズ', en: 'Vodka Collins', materials: 'ウォッカ, レモン, 砂糖, ソーダ', desc: 'トムコリンズのベースをウォッカに変えたもの。非常にクリアな味。' },
    { id: 'v26', base: 'ウォッカ', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ウォッカリッキー', en: 'Vodka Rickey', materials: 'ウォッカ, ライム, ソーダ', desc: '砂糖不使用でドライ。食事の邪魔をしないさっぱりした一杯。' },
    { id: 'v27', base: 'ウォッカ', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'スレッジハンマー', en: 'Sledgehammer', materials: 'ウォッカ, ライムジュース', desc: '「大型ハンマー」の意味。パンチの効いたギムレット。' },
    { id: 'v28', base: 'ウォッカ', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'フルーティ'], jp: 'マドラス', en: 'Madras', materials: 'ウォッカ, クランベリー, オレンジ', desc: '鮮やかな色合い。チェック柄の布地を思わせるカクテル。' },
    { id: 'v29', base: 'ウォッカ', styles: ['ロング', 'ジュース'], flavors: ['フルーティ', '甘め'], jp: 'ベイブリーズ', en: 'Bay Breeze', materials: 'ウォッカ, クランベリー, パイン', desc: 'クランベリーとパインのトロピカルな組み合わせです。' },
    { id: 'v30', base: 'ウォッカ', styles: ['ショート', 'ステア'], flavors: ['ドライ', 'ハーブ / ミント'], jp: 'ウォッカマティーニ', en: 'Vodka Martini', materials: 'ウォッカ, ドライベルモット', desc: 'ジンよりクリアで癖のないマティーニ。「カンガルー」とも。' },

    // --- RUM, TEQUILA, WHISKEY, BRANDY, LIQUEUR, WINE, BEER, SAKE, NON-ALCOHOL ---
    // (データは省略せずに全て維持されます。ここでは表示上の都合でVODKAまでを明示していますが、実際のコードには全229種が含まれます)
    // --- RUM (18 items) ---
    { id: 'r1', base: 'ラム', styles: ['ロング', '炭酸', 'ビルド'], flavors: ['ハーブ / ミント', 'さっぱり'], jp: 'モヒート', en: 'Mojito', materials: 'ホワイトラム, ミント, ライム, 砂糖, ソーダ', desc: '清涼感No.1のキューバ国民酒。' },
    { id: 'r2', base: 'ラム', styles: ['ショート', 'シェイク'], flavors: ['柑橘', '甘め'], jp: 'ダイキリ', en: 'Daiquiri', materials: 'ホワイトラム, ライム, 砂糖', desc: 'バーテンダーの実力が現れる「試金石」。' },
    { id: 'r3', base: 'ラム', styles: ['ロング', '炭酸'], flavors: ['甘め', '柑橘'], jp: 'キューバリブレ', en: 'Cuba Libre', materials: 'ホワイトラム, コーラ, ライム', desc: '「キューバの自由万歳」。' },
    { id: 'r4', base: 'ラム', styles: ['ショート', 'シェイク'], flavors: ['柑橘', 'さっぱり'], jp: 'X.Y.Z', en: 'X.Y.Z', materials: 'ホワイトラム, ホワイトキュラソー, レモン', desc: '「最高の」「これ以上のない」一杯。' },
    { id: 'r5', base: 'ラム', styles: ['ロング', 'シェイク', 'ジュース'], flavors: ['甘め', 'フルーティ', 'トロピカル', 'クリーミー'], jp: 'ピニャコラーダ', en: 'Pina Colada', materials: 'ホワイトラム, パインジュース, ココナッツミルク', desc: '濃厚なトロピカルカクテル。' },
    { id: 'r6', base: 'ラム', styles: ['ロング', 'シェイク'], flavors: ['甘め', 'フルーティ', 'トロピカル'], jp: 'マイタイ', en: 'Mai-Tai', materials: 'ホワイトラム, ダークラム, オレンジキュラソー, ライム', desc: '「トロピカルカクテルの女王」。' },
    { id: 'r7', base: 'ラム', styles: ['ロング', 'ジュース', '炭酸'], flavors: ['フルーティ', 'トロピカル'], jp: 'ブルーハワイ', en: 'Blue Hawaii', materials: 'ホワイトラム, ブルーキュラソー, パイン, レモン', desc: 'ハワイの海色が美しい。' },
    { id: 'r8', base: 'ラム', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ボストンクーラー', en: 'Boston Cooler', materials: 'ホワイトラム, レモン, 砂糖, ジンジャーエール', desc: '清涼感あふれるロングカクテル。' },
    { id: 'r9', base: 'ラム', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ', 'クリーミー'], jp: 'ミリオンダラー', en: 'Million Dollar', materials: 'ラム, スイートベルモット, パイン, 卵白', desc: '日本発世界的カクテル。' },
    { id: 'r10', base: 'ラム', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'スカイダイビング', en: 'Sky Diving', materials: 'ラム, ブルーキュラソー, ライム', desc: '澄み切った青空のような日本の名作。' },
    { id: 'r11', base: 'ラム', styles: ['ロング', '炭酸', 'ビルド'], flavors: ['スパイシー', '甘め'], jp: 'ダーク＆ストーミー', en: 'Dark \'n\' Stormy', materials: 'ダークラム, ジンジャービア, ライム', desc: 'スパイシーなジンジャービアが効いています。' },
    { id: 'r12', base: 'ラム', styles: ['ロング', 'ジュース'], flavors: ['フルーティ', '甘め', 'トロピカル'], jp: 'プランターズパンチ', en: 'Planter\'s Punch', materials: 'ダークラム, オレンジ, レモン, グレナデン, ソーダ', desc: 'フルーツたっぷりで南国の香り。' },
    { id: 'r13', base: 'ラム', styles: ['ショート', 'ロック'], flavors: ['苦味', '甘め', 'トロピカル'], jp: 'ジャングルバード', en: 'Jungle Bird', materials: 'ダークラム, カンパリ, パインジュース, ライム, 砂糖', desc: 'ビター系トロピカル。' },
    { id: 'r14', base: 'ラム', styles: ['ショート', 'シェイク'], flavors: ['柑橘', 'さっぱり'], jp: 'ヘミングウェイダイキリ', en: 'Hemingway Daiquiri', materials: 'ホワイトラム, マラスキーノ, GFJ, ライム', desc: '通称パパ・ダイキリ。ドライな味わい。' },
    { id: 'r15', base: 'ラム', styles: ['ショート', 'ロック', 'ビルド'], flavors: ['柑橘', '甘め', 'トロピカル'], jp: 'カイピリーニャ', en: 'Caipirinha', materials: 'カシャッサ, ライム, 砂糖', desc: 'ブラジルの国民酒。野性的。' },
    { id: 'r16', base: 'ラム', styles: ['ロング', 'トニック'], flavors: ['さっぱり', '柑橘'], jp: 'ラムトニック', en: 'Rum Tonic', materials: 'ホワイトラム, トニックウォーター, ライム', desc: '甘い香りをトニックの苦味が引き締める。' },
    { id: 'r17', base: 'ラム', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'ソルクバーノ', en: 'Sol Cubano', materials: 'ラム, グレープフルーツジュース, トニックウォーター', desc: '「キューバの太陽」。神戸発祥の傑作。' },
    { id: 'r18', base: 'ラム', styles: ['ロング', 'シェイク'], flavors: ['トロピカル', '甘め', 'フルーティ'], jp: 'ゾンビ', en: 'Zombie', materials: '数種のラム, パイン, ライム, グレナデン等', desc: '悪魔的な美味しさとパンチ。' },
    { id: 't1', base: 'テキーラ', styles: ['ショート', 'シェイク'], flavors: ['柑橘', '塩味', 'さっぱり'], jp: 'マルガリータ', en: 'Margarita', materials: 'テキーラ, ホワイトキュラソー, ライム, 塩', desc: '亡き恋人を偲んで作ったとされる切ない名作。' },
    { id: 't2', base: 'テキーラ', styles: ['ロング', 'ジュース'], flavors: ['甘め', '柑橘', 'フルーティ'], jp: 'テキーラサンライズ', en: 'Tequila Sunrise', materials: 'テキーラ, オレンジジュース, グレナデンシロップ', desc: '朝焼けのグラデーションを描く美しい一杯。' },
    { id: 't3', base: 'テキーラ', styles: ['ロング', 'シェイク'], flavors: ['フルーティ', 'さっぱり'], jp: 'マタドール', en: 'Matador', materials: 'テキーラ, パインジュース, ライム', desc: '「闘牛士」。パインの甘みで情熱的に。' },
    { id: 't4', base: 'テキーラ', styles: ['ショート', 'シェイク'], flavors: ['ハーブ / ミント', 'さっぱり'], jp: 'モッキンバード', en: 'Mockingbird', materials: 'テキーラ, グリーンミント, ライム', desc: 'ミントの清涼感が意外なほどマッチ。' },
    { id: 't5', base: 'テキーラ', styles: ['ロング', '炭酸'], flavors: ['柑橘', 'さっぱり'], jp: 'パロマ', en: 'Paloma', materials: 'テキーラ, グレープフルーツ, トニック/ソーダ', desc: 'メキシコで最も親しまれているカクテル。' },
    { id: 't6', base: 'テキーラ', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'メキシコーラ', en: 'Mexicola', materials: 'テキーラ, コーラ, ライム', desc: 'テキーラ版キューバリブレ。' },
    { id: 't7', base: 'テキーラ', styles: ['ロング', 'トニック', '炭酸'], flavors: ['さっぱり', 'ドライ'], jp: 'テキーラトニック', en: 'Tequila Tonic', materials: 'テキーラ, トニックウォーター, ライム', desc: '通称「テキトニ」。' },
    { id: 't8', base: 'テキーラ', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'スパイシー'], jp: 'ブロードウェイサースト', en: 'Broadway Thirst', materials: 'テキーラ, オレンジジュース, レモンジュース', desc: 'オレンジの香りが喉の渇きを癒やす。' },
    { id: 't9', base: 'テキーラ', styles: ['ロング', '炭酸'], flavors: ['スパイシー', '甘め', 'フルーティ'], jp: 'エル・ディアブロ', en: 'El Diablo', materials: 'テキーラ, カシスリキュール, レモン, ジンジャーエール', desc: '「悪魔」という名に反して飲みやすい。' },
    { id: 't10', base: 'テキーラ', styles: ['ショート', 'ロック', 'シェイク'], flavors: ['柑橘', '甘め'], jp: 'トミーズマルガリータ', en: 'Tommy\'s Margarita', materials: 'テキーラ, アガベシロップ, ライム', desc: 'アガベ本来の風味が強調されます。' },
    { id: 't11', base: 'テキーラ', styles: ['ロング', 'ジュース'], flavors: ['野菜 / トマト', 'スパイシー'], jp: 'ストローハット', en: 'Straw Hat', materials: 'テキーラ, トマトジュース, レモン, 香辛料', desc: 'テキーラベースのブラッディメアリー。' },
    { id: 't12', base: 'テキーラ', styles: ['ショート', 'シェイク'], flavors: ['柑橘', 'ハーブ / ミント', '苦味'], jp: 'ネイキッド＆フェイマス', en: 'Naked and Famous', materials: 'メスカル, アペロール, シャルトリューズ黄, ライム', desc: '完璧なバランスのモダンクラシック。' },
    { id: 't13', base: 'テキーラ', styles: ['ロング', 'シェイク'], flavors: ['フルーティ', '柑橘', '甘め'], jp: 'アイスブレーカー', en: 'Ice Breaker', materials: 'テキーラ, ホワイトキュラソー, GFJ, グレナデン', desc: '場の雰囲気を和ませる鮮やかな赤色。' },
    { id: 't14', base: 'テキーラ', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'シクラメン', en: 'Cyclamen', materials: 'テキーラ, コアントロー, オレンジジュース, グレナデン', desc: '可憐なシクラメンの花のような色。' },
    { id: 't15', base: 'テキーラ', styles: ['ショート', 'ロック'], flavors: ['苦味', '甘め', 'ハーブ / ミント'], jp: 'ロージタ', en: 'Rosita', materials: 'テキーラ, カンパリ, ドライ＆スイートベルモット', desc: 'テキーラ版ネグローニ。' },
    { id: 't16', base: 'テキーラ', styles: ['ショート', 'ロック'], flavors: ['甘め', 'クリーミー', 'コーヒー / ナッツ'], jp: 'シルクストッキング', en: 'Silk Stockings', materials: 'テキーラ, カカオリキュール, 生クリーム, グレナデン', desc: '滑らかな口当たりのデザート。' },
    { id: 't17', base: 'テキーラ', styles: ['ショート', 'ロック', 'ビルド'], flavors: ['ドライ', 'スパイシー', '甘め'], jp: 'オアハカ・オールドファッションド', en: 'Oaxaca Old Fashioned', materials: 'テキーラ, メスカル, アガベシロップ, ビターズ', desc: '現代のNYで生まれたネオ・クラシック。メスカルのアクセントが効いた一杯。' },
    { id: 'w1', base: 'ウイスキー', styles: ['ロング', '炭酸'], flavors: ['さっぱり', 'ドライ'], jp: 'ハイボール', en: 'Highball', materials: 'ウイスキー, ソーダ', desc: 'ウイスキーの個性を炭酸が引き立てる。' },
    { id: 'w2', base: 'ウイスキー', styles: ['ショート', 'ロック', 'ビルド'], flavors: ['苦味', '甘め', '柑橘'], jp: 'オールドファッションド', en: 'Old Fashioned', materials: 'バーボン, アロマチックビターズ, 角砂糖, オレンジ', desc: 'カクテルの原型とも言える一杯。' },
    { id: 'w3', base: 'ウイスキー', styles: ['ショート', 'ステア'], flavors: ['甘め', 'ハーブ / ミント', 'ドライ'], jp: 'マンハッタン', en: 'Manhattan', materials: 'ウイスキー, スイートベルモット, ビターズ', desc: '「カクテルの女王」。' },
    { id: 'w4', base: 'ウイスキー', styles: ['ショート', 'ロック'], flavors: ['甘め', 'コーヒー / ナッツ'], jp: 'ゴッドファーザー', en: 'Godfather', materials: 'ウイスキー, アマレット', desc: '芳醇な香りが重厚な世界観を表現。' },
    { id: 'w5', base: 'ウイスキー', styles: ['ショート', 'ロック'], flavors: ['甘め', 'ハーブ / ミント'], jp: 'ラスティネイル', en: 'Rusty Nail', materials: 'スコッチウイスキー, ドランブイ', desc: '「錆びた釘」。まろやかで奥深い。' },
    { id: 'w6', base: 'ウイスキー', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'ウイスキーサワー', en: 'Whiskey Sour', materials: 'ウイスキー, レモンジュース, 砂糖, (卵白)', desc: 'レモンの酸味と砂糖の甘味。' },
    { id: 'w7', base: 'ウイスキー', styles: ['ロング', 'ビルド', '氷'], flavors: ['ハーブ / ミント', '甘め', 'さっぱり'], jp: 'ミントジュレップ', en: 'Mint Julep', materials: 'バーボン, ミント, 砂糖, クラッシュアイス', desc: 'たっぷり氷の南部流スタイル。' },
    { id: 'w8', base: 'ウイスキー', styles: ['ショート', 'シェイク'], flavors: ['柑橘', '甘め'], jp: 'ニューヨーク', en: 'New York', materials: 'ライウイスキー, ライム, グレナデン, 砂糖', desc: '大都市の夕暮れを思わせる色。' },
    { id: 'w9', base: 'ウイスキー', styles: ['ロング', '炭酸'], flavors: ['スパイシー', 'さっぱり'], jp: 'マミーテイラー', en: 'Mamie Taylor', materials: 'スコッチウイスキー, ライム, ジンジャーエール', desc: 'スコッチのスモーキーさと辛味がマッチ。' },
    { id: 'w10', base: 'ウイスキー', styles: ['ショート', 'ステア'], flavors: ['甘め', 'ハーブ / ミント'], jp: 'ロブ・ロイ', en: 'Rob Roy', materials: 'スコッチウイスキー, スイートベルモット, ビターズ', desc: 'スコッチベースのマンハッタン。' },
    { id: 'w11', base: 'ウイスキー', styles: ['ショート', 'シェイク'], flavors: ['スパイシー', '柑橘', '甘め'], jp: 'ペニシリン', en: 'Penicillin', materials: 'スコッチ, レモン, 蜂蜜生姜シロップ, アイラモルト', desc: 'スモーキーなアイラをフロート。' },
    { id: 'w12', base: 'ウイスキー', styles: ['ショート', 'ロック', 'ステア'], flavors: ['苦味', '甘め', 'ハーブ / ミント'], jp: 'ブールヴァルディエ', en: 'Boulevardier', materials: 'ウイスキー, カンパリ, スイートベルモット', desc: 'リッチで温かみのある大人の味。' },
    { id: 'w13', base: 'ウイスキー', styles: ['ロング', 'ビルド'], flavors: ['甘め', 'コーヒー / ナッツ', 'クリーミー'], jp: 'アイリッシュコーヒー', en: 'Irish Coffee', materials: 'アイリッシュウイスキー, ホットコーヒー, 砂糖, 生クリーム', desc: '絶品ホットカクテル。' },
    { id: 'w14', base: 'ウイスキー', styles: ['ロング', 'トニック'], flavors: ['さっぱり', '柑橘', 'ドライ'], jp: 'ウイスキートニック', en: 'Whiskey Tonic', materials: 'ウイスキー, トニックウォーター', desc: '樽香がよく合うトニック割り。' },
    { id: 'w15', base: 'ウイスキー', styles: ['ショート', 'シェイク'], flavors: ['柑橘', '甘め', 'フルーティ'], jp: 'ワードエイト', en: 'Ward Eight', materials: 'ライウイスキー, レモン, オレンジ, グレナデン', desc: 'フルーティーな一杯。' },
    { id: 'w16', base: 'ウイスキー', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'ゴールドラッシュ', en: 'Gold Rush', materials: 'バーボン, レモンジュース, 蜂蜜シロップ', desc: 'リッチで濃厚なモダンクラシック。' },
    { id: 'w17', base: 'ウイスキー', styles: ['ショート', 'ステア'], flavors: ['ドライ', '苦味', 'ハーブ / ミント'], jp: 'オールドパル', en: 'Old Pal', materials: 'ライウイスキー, ドライベルモット, カンパリ', desc: '「古い友人」。辛口でシャープ。' },
    { id: 'w18', base: 'ウイスキー', styles: ['ショート', 'ビルド', 'ロック'], flavors: ['スパイシー', '苦味', 'ハーブ / ミント'], jp: 'サゼラック', en: 'Sazerac', materials: 'ライウイスキー, アブサン, 砂糖, ペイショーズビターズ', desc: '世界最古のカクテルの一つ。' },
    { id: 'w19', base: 'ウイスキー', styles: ['ロング', 'ビルド'], flavors: ['柑橘', '甘め', 'さっぱり'], jp: 'ジョンコリンズ', en: 'John Collins', materials: 'ウイスキー, レモン, 砂糖, ソーダ', desc: 'トムコリンズのウイスキー版。' },
    { id: 'w20', base: 'ウイスキー', styles: ['ショート', 'ステア'], flavors: ['苦味', 'ドライ', 'ハーブ / ミント'], jp: 'ブルックリン', en: 'Brooklyn', materials: 'ライウイスキー, ドライベルモット, アメールピコン, マラスキーノ', desc: '幻のカクテルとも。' },
    { id: 'w21', base: 'ウイスキー', styles: ['ショート', 'ステア'], flavors: ['ハーブ / ミント', '甘め', '苦味'], jp: 'モンテカルロ', en: 'Monte Carlo', materials: 'ライウイスキー, ベネディクティン, ビターズ', desc: 'リッチでエレガント。' },
    { id: 'w22', base: 'ウイスキー', styles: ['ショート', 'ステア'], flavors: ['ハーブ / ミント', '甘め', '苦味'], jp: 'リメンバー・ザ・メイン', en: 'Remember the Maine', materials: 'ライウイスキー, スイートベルモット, チェリーヒーリング, アブサン', desc: 'アブサンが香る力強い一杯。' },
    { id: 'w23', base: 'ウイスキー', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ'], jp: 'ブラッド・アンド・サンド', en: 'Blood and Sand', materials: 'スコッチ, スイートベルモット, チェリーブランデー, オレンジ', desc: '映画を記念した一杯。ドラマチックな味。' },
    { id: 'w24', base: 'ウイスキー', styles: ['ショート', 'シェイク'], flavors: ['苦味', '柑橘', '甘め'], jp: 'ペーパープレーン', en: 'Paper Plane', materials: 'バーボン, アペロール, アマーロ・ノニーノ, レモン', desc: '2008年誕生のニュー・クラシック。' },
    { id: 'b1', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'サイドカー', en: 'Sidecar', materials: 'ブランデー, ホワイトキュラソー, レモン', desc: 'カクテルの傑作。ブランデーの芳醇なコクと柑橘の完璧なバランス。' },
    { id: 'b2', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'クリーミー', 'コーヒー / ナッツ'], jp: 'アレキサンダー', en: 'Alexander', materials: 'ブランデー, カカオリキュール, 生クリーム', desc: '贅沢なデザートカクテル。' },
    { id: 'b3', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ'], jp: 'ジャックローズ', en: 'Jack Rose', materials: 'カルヴァドス, ライム, グレナデンシロップ', desc: 'バラのつぼみのような一杯。' },
    { id: 'b4', base: 'ブランデー', styles: ['ロング', '炭酸'], flavors: ['柑橘', 'さっぱり'], jp: 'フレンチ125', en: 'French 125', materials: 'ブランデー, レモン, 砂糖, シャンパン', desc: '重厚でリッチな味わい。' },
    { id: 'b5', base: 'ブランデー', styles: ['ロング', 'ビルド'], flavors: ['ドライ', '柑橘', 'スパイシー'], jp: 'ホーセズネック', en: "Horse's Neck", materials: 'ブランデー, ジンジャーエール, レモンの皮', desc: '長くむいたレモンの皮が特徴。' },
    { id: 'b6', base: 'ブランデー', styles: ['ショート', 'ビルド'], flavors: ['甘め', '柑橘'], jp: 'ニコラシカ', en: 'Nikolaschka', materials: 'ブランデー, レモンスライス, 砂糖', desc: '口の中で完成させる異色作。' },
    { id: 'b7', base: 'ブランデー', styles: ['ショート', 'ロック'], flavors: ['甘め', 'コーヒー / ナッツ'], jp: 'フレンチコネクション', en: 'French Connection', materials: 'ブランデー, アマレット', desc: 'ブランデーとアマレットの相性が抜群。' },
    { id: 'b8', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['ハーブ / ミント', 'さっぱり'], jp: 'スティンガー', en: 'Stinger', materials: 'ブランデー, ホワイトミント', desc: 'ミントの鋭い清涼感の食後酒。' },
    { id: 'b9', base: 'ブランデー', styles: ['ロング', 'トニック', '炭酸'], flavors: ['さっぱり', '柑橘', 'フルーティ'], jp: 'カルヴァドストニック', en: 'Calvados Tonic', materials: 'カルヴァドス, トニックウォーター', desc: 'リンゴの香りと苦味がマッチ。' },
    { id: 'b10', base: 'ブランデー', styles: ['ショート', 'ステア'], flavors: ['甘め', 'ハーブ / ミント', 'ドライ'], jp: 'キャロル', en: 'Carol', materials: 'ブランデー, スイートベルモット', desc: '優雅な余韻を残す美しい一杯。' },
    { id: 'b11', base: 'ブランデー', styles: ['ショート', 'ステア', 'ロック'], flavors: ['苦味', 'ハーブ / ミント', 'ドライ'], jp: 'ビュー・カレ', en: 'Vieux Carre', materials: 'ライウイスキー, ブランデー, スイートベルモット, ベネディクティン', desc: 'ニューオーリンズ生まれの名作。' },
    { id: 'b12', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'ブランデーサワー', en: 'Brandy Sour', materials: 'ブランデー, レモン, 砂糖, ソーダ', desc: 'フルーティーで初心者にもおすすめ。' },
    { id: 'b13', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['柑橘', '甘め'], jp: 'ビトウィーン・ザ・シーツ', en: 'Between the Sheets', materials: 'ブランデー, ホワイトラム, コアントロー, レモン', desc: '寝酒として有名な一杯。' },
    { id: 'b14', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'ピスコサワー', en: 'Pisco Sour', materials: 'ピスコ, レモン, 砂糖, 卵白, ビターズ', desc: 'ペルーとチリの国民的カクテル。' },
    { id: 'b15', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'オリンピック', en: 'Olympic', materials: 'ブランデー, オレンジキュラソー, オレンジジュース', desc: 'コニャックとオレンジの格式高い味。' },
    { id: 'b16', base: 'ブランデー', styles: ['ショート', 'ビルド'], flavors: ['ハーブ / ミント', '甘め'], jp: 'B&B', en: 'B&B', materials: 'ブランデー, ベネディクティン', desc: 'シンプルかつ濃厚。' },
    { id: 'b17', base: 'ブランデー', styles: ['ショート', 'ロック'], flavors: ['甘め', 'コーヒー / ナッツ', '苦味'], jp: 'ダーティマザー', en: 'Dirty Mother', materials: 'ブランデー, コーヒーリキュール', desc: '深みのある味わい。' },
    { id: 'b18', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', 'ハーブ / ミント', '甘め'], jp: 'ハネムーン', en: 'Honeymoon', materials: 'アップルブランデー, ベネディクティン, キュラソー, レモン', desc: '甘く幸せな「蜜月」の味。' },
    { id: 'b19', base: 'ブランデー', styles: ['ロング', 'シェイク'], flavors: ['さっぱり', '柑橘', 'フルーティ'], jp: 'ハーバードクーラー', en: 'Harvard Cooler', materials: 'アップルブランデー, レモン, 砂糖, ソーダ', desc: '爽やかで知的な味わい。' },
    { id: 'b20', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '甘め', 'ドライ'], jp: 'コープスリバイバーNo.1', en: 'Corpse Reviver No.1', materials: 'ブランデー, アップルブランデー, スイートベルモット', desc: '力強い迎え酒。' },
    { id: 'b21', base: 'ブランデー', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'ハーブ / ミント'], jp: 'ウィドウズ・キス', en: 'Widow\'s Kiss', materials: 'カルヴァドス, ベネディクティン, シャルトリューズ黄', desc: '非常に重厚で魅惑的な食後酒。' },
    { id: 'b22', base: 'ブランデー', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘', 'スパイシー'], jp: 'チルカーノ', en: 'Chilcano', materials: 'ピスコ, ライム, ジンジャーエール, ビターズ', desc: 'ピスコを爽快に楽しむロング。' },
    { id: 'l1', base: 'リキュール', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'フルーティ'], jp: 'カシスオレンジ', en: 'Cassis and Orange', materials: 'カシスリキュール, オレンジジュース', desc: '鉄板の甘酸っぱい定番。' },
    { id: 'l2', base: 'リキュール', styles: ['ロング', '炭酸', 'トニック'], flavors: ['苦味', '柑橘', 'さっぱり'], jp: 'スプモーニ', en: 'Spumoni', materials: 'カンパリ, グレープフルーツ, トニック', desc: '完璧な三角形を描く食前酒。' },
    { id: 'l3', base: 'リキュール', styles: ['ロング', '炭酸', 'トニック'], flavors: ['甘め', '柑橘', 'トロピカル'], jp: 'チャイナブルー', en: 'China Blue', materials: 'ライチリキュール, ブルーキュラソー, GFJ, トニック', desc: 'オリエンタルな雰囲気。' },
    { id: 'l4', base: 'リキュール', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'フルーティ'], jp: 'ファジーネーブル', en: 'Fuzzy Navel', materials: 'ピーチリキュール, オレンジジュース', desc: '優しくフルーティー。' },
    { id: 'l5', base: 'リキュール', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'ハーブ / ミント', 'クリーミー'], jp: 'グラスホッパー', en: 'Grasshopper', materials: 'ミントリキュール, カカオリキュール, 生クリーム', desc: 'チョコミント味のデザート。' },
    { id: 'l6', base: 'リキュール', styles: ['ロング', 'ロック', 'ジュース'], flavors: ['甘め', 'クリーミー', '苦味', 'コーヒー / ナッツ'], jp: 'カルーアミルク', en: 'Kahlua and Milk', materials: 'カルーア, 牛乳', desc: 'カフェオレのような飲みやすさ。' },
    { id: 'l7', base: 'リキュール', styles: ['ロング', '炭酸'], flavors: ['苦味', 'さっぱり'], jp: 'カンパリソーダ', en: 'Campari and Soda', materials: 'カンパリ, ソーダ', desc: '大人のイタリアン清涼剤。' },
    { id: 'l8', base: 'リキュール', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'フルーティ', 'トロピカル'], jp: 'マリブコーク', en: 'Malibu Coke', materials: 'マリブ, コーラ', desc: 'ココナッツが香るカジュアルな一杯。' },
    { id: 'l9', base: 'リキュール', styles: ['ロング', '炭酸'], flavors: ['苦味', '柑橘', 'さっぱり'], jp: 'アペロールスプリッツ', en: 'Aperol Spritz', materials: 'アペロール, プロセッコ, ソーダ, オレンジ', desc: 'イタリアの夕暮れの定番。' },
    { id: 'l10', base: 'リキュール', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'フルーティ', 'さっぱり'], jp: 'レゲエパンチ', en: 'Reggae Punch', materials: 'ピーチリキュール, ウーロン茶', desc: '仙台発祥。「ピーチウーロン」。' },
    { id: 'l11', base: 'リキュール', styles: ['ロング', '炭酸', 'トニック'], flavors: ['甘め', 'フルーティ', 'トロピカル'], jp: 'ディタオニ', en: 'Ditaoni', materials: 'ディタ（ライチ）, GFJ, トニック', desc: 'ライチの風味が際立つ。' },
    { id: 'l12', base: 'リキュール', styles: ['ロング', 'トニック'], flavors: ['甘め', 'トロピカル', 'さっぱり'], jp: 'マリブトニック', en: 'Malibu Tonic', materials: 'マリブ, トニックウォーター', desc: '爽やかなトロピカル・ロング。' },
    { id: 'l13', base: 'リキュール', styles: ['ロング', 'トニック'], flavors: ['甘め', 'フルーティ', 'さっぱり'], jp: 'カシストニック', en: 'Cassis Tonic', materials: 'カシスリキュール, トニックウォーター', desc: 'トニックが引き締める。' },
    { id: 'l14', base: 'リキュール', styles: ['ロング', 'トニック'], flavors: ['甘め', 'フルーティ', 'さっぱり'], jp: 'ピーチトニック', en: 'Peach Tonic', materials: 'ピーチリキュール, トニックウォーター', desc: '軽やかな桃のロング。' },
    { id: 'l15', base: 'リキュール', styles: ['ロング', 'トニック'], flavors: ['ハーブ / ミント', 'さっぱり', '苦味'], jp: 'スーズトニック', en: 'Suze Tonic', materials: 'スーズ, トニックウォーター', desc: '独特の土っぽい苦味が癖になる。' },
    { id: 'l16', base: 'リキュール', styles: ['ロング', 'トニック'], flavors: ['ハーブ / ミント', 'さっぱり', '苦味'], jp: 'シャルトリューズトニック', en: 'Chartreuse Tonic', materials: 'シャルトリューズ, トニック', desc: 'ハーブ香る贅沢な一杯。' },
    { id: 'l17', base: 'リキュール', styles: ['ロング', 'トニック'], flavors: ['フルーティ', 'さっぱり', '柑橘'], jp: 'パッソアトニック', en: 'Passoa Tonic', materials: 'パッソア, トニックウォーター', desc: 'トロピカルな酸味。' },
    { id: 'l18', base: 'リキュール', styles: ['ロング', 'トニック'], flavors: ['フルーティ', 'さっぱり'], jp: 'ミドリオニ', en: 'Midorioni', materials: 'ミドリ, GFJ, トニック', desc: 'メロンの甘みと苦味が調和。' },
    { id: 'l19', base: 'リキュール', styles: ['ショート', 'シェイク'], flavors: ['甘め', '柑橘'], jp: 'バレンシア', en: 'Valencia', materials: 'アプリコットブランデー, オレンジジュース, ビターズ', desc: '太陽のように明るい味。' },
    { id: 'l20', base: 'リキュール', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ'], jp: 'チャーリーチャップリン', en: 'Charlie Chaplin', materials: 'スロージン, アプリコットブランデー, レモン', desc: '喜劇王の名を冠した甘酸っぱい味。' },
    { id: 'l21', base: 'リキュール', styles: ['ロング', '炭酸'], flavors: ['苦味', 'さっぱり'], jp: 'アメリカーノ', en: 'Americano', materials: 'カンパリ, スイートベルモット, ソーダ', desc: 'ボンドが最初に注文した酒。' },
    { id: 'l22', base: 'リキュール', styles: ['ロング', 'ジュース', 'シェイク'], flavors: ['甘め', 'クリーミー'], jp: 'スノーボール', en: 'Snowball', materials: 'アドヴォカート, ライムジュース, ソーダ', desc: '雪玉のように白くまろやか。' },
    { id: 'l23', base: 'リキュール', styles: ['ロング', 'シェイク', '炭酸'], flavors: ['甘め', 'フルーティ'], jp: 'バイオレットフィズ', en: 'Violet Fizz', materials: 'パルフェタムール, レモン, ソーダ', desc: '華やかに香る紫色のカクテル。' },
    { id: 'l24', base: 'リキュール', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'トロピカル', 'クリーミー'], jp: 'マリブミルク', en: 'Malibu Milk', materials: 'マリブ, 牛乳', desc: '杏仁豆腐のような風味。' },
    { id: 'l25', base: 'リキュール', styles: ['ロング', 'ジュース'], flavors: ['苦味', '甘め', '柑橘'], jp: 'カンパリオレンジ', en: 'Campari Orange', materials: 'カンパリ, オレンジジュース', desc: 'イタリアの名作「ガリバルディ」。' },
    { id: 'l26', base: 'リキュール', styles: ['ショート', 'ビルド'], flavors: ['甘め', 'コーヒー / ナッツ', 'クリーミー'], jp: 'B-52', en: 'B-52', materials: 'カルーア, ベイリーズ, グランマルニエ', desc: '層に重ねたプースカフェ。' },
    { id: 'l27', base: 'リキュール', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'コーヒー / ナッツ', '柑橘'], jp: 'アマレットサワー', en: 'Amaretto Sour', materials: 'アマレット, レモン, 卵白', desc: 'お菓子のような風味が楽しめる。' },
    { id: 'l28', base: 'リキュール', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'クリーミー', 'ハーブ / ミント'], jp: 'ゴールデンキャデラック', en: 'Golden Cadillac', materials: 'ガリアーノ, ホワイトカカオ, 生クリーム', desc: '黄金色の高級デザート。' },
    { id: 'l29', base: 'リキュール', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'クリーミー', '柑橘'], jp: 'ゴールデンドリーム', en: 'Golden Dream', materials: 'ガリアーノ, コアントロー, オレンジ, 生クリーム', desc: '夢見心地な甘さと口当たり。' },
    { id: 'wi1', base: 'ワイン', styles: ['ロング', 'ビルド'], flavors: ['甘め', 'フルーティ'], jp: 'キール', en: 'Kir', materials: '白ワイン, カシスリキュール', desc: '食前酒の代名詞的存在。' },
    { id: 'wi2', base: 'ワイン', styles: ['ロング', '炭酸'], flavors: ['さっぱり', 'ドライ'], jp: 'スプリッツァー', en: 'Spritzer', materials: '白ワイン, ソーダ', desc: 'シンプルで軽やかな一杯。' },
    { id: 'wi3', base: 'ワイン', styles: ['ロング', '炭酸'], flavors: ['甘め', 'さっぱり'], jp: 'キティ', en: 'Kitty', materials: '赤ワイン, ジンジャーエール', desc: '渋みが和らいだ「子猫」。' },
    { id: 'wi4', base: 'ワイン', styles: ['ロング', '炭酸'], flavors: ['甘め', 'さっぱり'], jp: 'オペレーター', en: 'Operator', materials: '白ワイン, ジンジャーエール', desc: '白ワイン版のキティ。' },
    { id: 'wi5', base: 'ワイン', styles: ['ロング', 'ビルド'], flavors: ['柑橘', '甘め', 'さっぱり'], jp: 'アメリカンレモネード', en: 'American Lemonade', materials: '赤ワイン, レモン, 砂糖, 水', desc: '二層の美しいカクテル。' },
    { id: 'wi6', base: 'ワイン', styles: ['ロング', 'ジュース'], flavors: ['柑橘', 'フルーティ', '甘め'], jp: 'ミモザ', en: 'Mimosa', materials: 'シャンパン, オレンジジュース', desc: '贅沢なブランチの定番。' },
    { id: 'wi7', base: 'ワイン', styles: ['ロング', 'ジュース'], flavors: ['フルーティ', '甘め'], jp: 'ベリーニ', en: 'Bellini', materials: 'プロセッコ, ピーチネクター', desc: '白桃のピューレが上品。' },
    { id: 'wi8', base: 'ワイン', styles: ['ロング', 'ジュース'], flavors: ['フルーティ', '甘め'], jp: 'サングリア', en: 'Sangria', materials: '赤ワイン, フルーツ, 砂糖, スパイス', desc: 'スペインの陽気な国民酒。' },
    { id: 'wi9', base: 'ワイン', styles: ['ロング', 'ビルド'], flavors: ['甘め', 'フルーティ'], jp: 'キールロワイヤル', en: 'Kir Royal', materials: 'シャンパン, カシスリキュール', desc: 'より華やかで祝祭感のある一杯。' },
    { id: 'wi10', base: 'ワイン', styles: ['ショート', 'ステア'], flavors: ['ドライ', 'ハーブ / ミント'], jp: 'バンブー', en: 'Bamboo', materials: 'ドライシェリー, ドライベルモット', desc: '横浜生まれの世界的名作。' },
    { id: 'wi11', base: 'ワイン', styles: ['ショート', 'ステア'], flavors: ['甘め', 'ハーブ / ミント'], jp: 'アドニス', en: 'Adonis', materials: 'ドライシェリー, スイートベルモット', desc: '優雅でバランスの取れた味。' },
    { id: 'wi12', base: 'ワイン', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'フルーティ', '柑橘'], jp: 'ワインクーラー', en: 'Wine Cooler', materials: 'ワイン, オレンジ, グレナデン', desc: '暑い季節にぴったりの一杯。' },
    { id: 'wi13', base: 'ワイン', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'クリーミー', 'コーヒー / ナッツ'], jp: 'ポートフリップ', en: 'Porto Flip', materials: 'ポートワイン, 卵黄, 砂糖', desc: '濃厚でリッチな滋養強壮酒。' },
    { id: 'wi14', base: 'ワイン', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘', '甘め'], jp: 'ティント・デ・ベラノ', en: 'Tinto de Verano', materials: '赤ワイン, レモンソーダ', desc: '「夏の赤ワイン」スペインの定番。' },
    { id: 'wi15', base: 'ワイン', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘', 'ドライ'], jp: 'レブヒート', en: 'Rebujito', materials: 'シェリー, スプライト, ミント', desc: 'モヒートのような爽やかさ。' },
    { id: 'be1', base: 'ビール', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '苦味', 'スパイシー'], jp: 'シャンディガフ', en: 'Shandy Gaff', materials: 'ビール, ジンジャーエール', desc: 'ビールの苦味が和らぎ飲みやすい。' },
    { id: 'be2', base: 'ビール', styles: ['ロング', 'ジュース'], flavors: ['野菜 / トマト', 'さっぱり', '苦味'], jp: 'レッドアイ', en: 'Red Eye', materials: 'ビール, トマトジュース', desc: 'ヘルシーな一杯。' },
    { id: 'be3', base: 'ビール', styles: ['ロング', 'ビルド'], flavors: ['ドライ', '苦味'], jp: 'ドッグスノーズ', en: "Dog's Nose", materials: 'ビール, ジン', desc: 'ビールにジンを加えた強烈な一杯。' },
    { id: 'be4', base: 'ビール', styles: ['ロング', '炭酸'], flavors: ['柑橘', 'さっぱり'], jp: 'パナシェ', en: 'Panache', materials: 'ビール, レモンソーダ', desc: 'フランスで人気の軽快な一杯。' },
    { id: 'be5', base: 'ビール', styles: ['ロング', '炭酸'], flavors: ['苦味', '甘め'], jp: 'カンパリビア', en: 'Campari Beer', materials: 'ビール, カンパリ', desc: 'ハーブ香が深みを与える。' },
    { id: 'be6', base: 'ビール', styles: ['ロング', 'ビルド'], flavors: ['塩味', 'スパイシー', '野菜 / トマト'], jp: 'ミチェラーダ', en: 'Michelada', materials: 'ビール, ライム, 塩, タバスコ', desc: 'メキシコの国民的スパイシービール。' },
    { id: 'be7', base: 'ビール', styles: ['ロング', '炭酸'], flavors: ['甘め', '苦味'], jp: 'ディーゼル', en: 'Diesel', materials: 'ビール, コーラ', desc: '黒い液体が燃料に見えることから。' },
    { id: 'be8', base: 'ビール', styles: ['ロング', 'ビルド'], flavors: ['苦味', 'クリーミー'], jp: 'ブラックベルベット', en: 'Black Velvet', materials: 'スタウト, シャンパン', desc: 'ベルベットのように滑らかな高貴な酒。' },
    { id: 'be9', base: 'ビール', styles: ['ロング', 'ビルド'], flavors: ['苦味', 'ドライ'], jp: 'ボイラーメーカー', en: 'Boilermaker', materials: 'ビール, ウイスキー', desc: '労働者のための熱い酒。' },
    { id: 'be10', base: 'ビール', styles: ['ロング', '炭酸'], flavors: ['甘め', 'フルーティ', '苦味'], jp: 'カシスビア', en: 'Cassis Beer', materials: 'ビール, カシスリキュール', desc: '見た目も美しいカクテル。' },
    { id: 'sa1', base: '日本酒', styles: ['ショート', 'ロック'], flavors: ['柑橘', 'さっぱり'], jp: 'サムライロック', en: 'Samurai Rock', materials: '日本酒, ライムジュース', desc: 'キリッとした飲み口。' },
    { id: 'sa2', base: '日本酒', styles: ['ショート', 'ステア'], flavors: ['ドライ', 'さっぱり'], jp: 'サケティーニ', en: 'Saketini', materials: '日本酒, ジン, オリーブ', desc: '欧米でも人気のモダンクラシック。' },
    { id: 'sa3', base: '日本酒', styles: ['ロング', '炭酸', 'トニック'], flavors: ['さっぱり', '柑橘', '苦味'], jp: 'サケソニック', en: 'Sake Sonic', materials: '日本酒, トニック, ソーダ, ライム', desc: '日本酒を引き立てる爽快感。' },
    { id: 'sa4', base: '日本酒', styles: ['ロング', '炭酸'], flavors: ['甘め', 'さっぱり'], jp: '日本酒ハイボール', en: 'Sake Highball', materials: '日本酒, ソーダ, レモン', desc: '吟醸香が広がる食中酒。' },
    { id: 'sa5', base: '日本酒', styles: ['ロング', 'ジュース'], flavors: ['甘め', 'クリーミー'], jp: 'カルピス日本酒', en: 'Calpis Sake', materials: '日本酒, カルピス', desc: '発酵食品同士の相性が抜群。' },
    { id: 'sa6', base: '日本酒', styles: ['ショート', 'シェイク'], flavors: ['甘め', 'フルーティ'], jp: '撫子', en: 'Nadeshiko', materials: '日本酒, 卵白, グレナデン', desc: '優美なピンク色のショート。' },
    { id: 'sa7', base: '日本酒', styles: ['ロング', 'ビルド'], flavors: ['苦味', 'さっぱり'], jp: 'サケボム', en: 'Sake Bomb', materials: '日本酒, ビール', desc: 'パーティードリンクの定番。' },
    { id: 'sa8', base: '日本酒', styles: ['ロング', 'ビルド'], flavors: ['さっぱり', 'ハーブ / ミント'], jp: '緑茶ハイ', en: 'Green Tea Sake', materials: '日本酒, 緑茶', desc: '食事に合うさっぱりした味。' },
    { id: 'n1', base: 'ノンアルコール', styles: ['ロング', '炭酸'], flavors: ['甘め', '柑橘'], jp: 'シャーリーテンプル', en: 'Shirley Temple', materials: 'ジンジャーエール, グレナデン', desc: '往年の名子役の名を冠した定番。' },
    { id: 'n2', base: 'ノンアルコール', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'サラトガクーラー', en: 'Saratoga Cooler', materials: 'ライム, ジンジャーエール', desc: '食事にも合う爽快感。' },
    { id: 'n3', base: 'ノンアルコール', styles: ['ロング', 'トニック', '炭酸'], flavors: ['苦味', 'さっぱり', '柑橘'], jp: 'トニックライム', en: 'Tonic Lime', materials: 'トニックウォーター, ライム', desc: 'シンプルイズベスト。' },
    { id: 'n4', base: 'ノンアルコール', styles: ['ショート', 'シェイク', 'ジュース'], flavors: ['甘め', 'フルーティ'], jp: 'シンデレラ', en: 'Cinderella', materials: 'オレンジ, パイン, レモン', desc: '魔法の味の満足感。' },
    { id: 'n5', base: 'ノンアルコール', styles: ['ロング', 'ジュース'], flavors: ['スパイシー', '野菜 / トマト'], jp: 'バージンメアリー', en: 'Virgin Mary', materials: 'トマト, レモン, タバスコ', desc: '健康的でリフレッシュ。' },
    { id: 'n6', base: 'ノンアルコール', styles: ['ロング', 'ジュース'], flavors: ['甘め', '柑橘'], jp: 'プッシーキャット', en: 'Pussyfoot', materials: 'オレンジ, GFJ, 卵黄', desc: '濃厚でリッチな味わい。' },
    { id: 'n7', base: 'ノンアルコール', styles: ['ロング', 'ジュース'], flavors: ['フルーティ', 'トロピカル'], jp: 'フロリダ', en: 'Florida', materials: 'オレンジ, レモン, ビターズ', desc: '大人のノンアルコール。' },
    { id: 'n8', base: 'ノンアルコール', styles: ['ロング', 'ビルド'], flavors: ['さっぱり', '柑橘'], jp: 'アーノルドパーマー', en: 'Arnold Palmer', materials: 'アイスティー, レモン', desc: 'レモネードとアイスティーのミックス。' },
    { id: 'n9', base: 'ノンアルコール', styles: ['ロング', '炭酸'], flavors: ['スパイシー', 'さっぱり'], jp: 'シャーリージンジャー', en: 'Shirley Ginger', materials: 'ジンジャーエール, グレナデン', desc: '生姜の刺激が大人っぽい。' },
    { id: 'n10', base: 'ノンアルコール', styles: ['ショート', 'シェイク'], flavors: ['フルーティ', '甘め'], jp: 'ベリーベリー', en: 'Berry Berry', materials: 'クランベリー, ラズベリー', desc: 'デザート感覚で楽しめる。' },
    { id: 'n11', base: 'ノンアルコール', styles: ['ロング', '炭酸', 'ビルド'], flavors: ['ハーブ / ミント', 'さっぱり'], jp: 'バージンモヒート', en: 'Virgin Mojito', materials: 'ミント, ライム, ソーダ', desc: 'たっぷりのフレッシュミント。' },
    { id: 'n12', base: 'ノンアルコール', styles: ['ロング', '炭酸'], flavors: ['フルーティ', 'さっぱり'], jp: 'サマーディライト', en: 'Summer Delight', materials: 'ライム, グレナデン, ソーダ', desc: '「夏の喜び」爽快な一杯。' },
    { id: 'n13', base: 'ノンアルコール', styles: ['ロング', 'ジュース'], flavors: ['フルーティ', '甘め'], jp: 'セーフセックスオンザビーチ', en: 'Safe Sex on the Beach', materials: 'クランベリー, GFJ, ピーチ', desc: 'フルーティーでトロピカル。' },
    { id: 'n14', base: 'ノンアルコール', styles: ['ロング', 'シェイク'], flavors: ['トロピカル', '甘め', 'クリーミー'], jp: 'バージンコラーダ', en: 'Virgin Colada', materials: 'パイン, ココナッツミルク', desc: '濃厚なココナッツとパイン。' },
    { id: 'n15', base: 'ノンアルコール', styles: ['ロング', '炭酸'], flavors: ['さっぱり', '柑橘'], jp: 'レモンスカッシュ', en: 'Lemon Squash', materials: 'レモン, 砂糖, ソーダ', desc: 'バーの本気レモンスカッシュ。' }
];

const cocktails = Array.from(new Map(rawCocktails.map(c => [c.id, c])).values());

const CONFIG = {
    bases: ['ジン', 'ラム', 'ウォッカ', 'テキーラ', 'ウイスキー', 'ブランデー', 'ワイン', 'ビール', '日本酒', 'リキュール', 'ノンアルコール'],
    types: ['ロング', 'ショート'],
    styles: ['炭酸', 'トニック', 'ジュース', 'ロック', 'ストレート'],
    flavors: ['柑橘', '甘め', 'ドライ', 'さっぱり', 'フルーティ', '苦味', 'ハーブ / ミント', 'クリーミー', 'スパイシー', '塩味', 'トロピカル', '野菜 / トマト']
};

let state = { base: null, type: null, style: null, flavors: new Set(), keyword: '' };
let favorites = new Set(JSON.parse(localStorage.getItem('barRecallFavs') || '[]'));

const els = {
    baseGrid: document.getElementById('baseGrid'),
    typeGrid: document.getElementById('typeGrid'),
    styleGrid: document.getElementById('styleGrid'),
    flavorGrid: document.getElementById('flavorGrid'),
    cocktailList: document.getElementById('cocktailList'),
    favList: document.getElementById('favList'),
    favCount: document.getElementById('favCount'),
    resetBtn: document.getElementById('resetBtn'),
    favToggleBtn: document.getElementById('favToggleBtn'),
    viewSearch: document.getElementById('view-search'),
    viewFavorites: document.getElementById('view-favorites'),
    keywordInput: document.getElementById('keywordInput'),
    searchResultCount: document.getElementById('searchResultCount'),
    menuHeading: document.getElementById('menuHeading')
};

// --- Secure Download Function with Scrubbing ---
document.querySelector('.brand').addEventListener('click', function(e) {
    if (e.detail === 3) {
        // 1. DOMをクローン
        const clone = document.documentElement.cloneNode(true);
        
        // 2. 不要なスクリプトタグを徹底的に削除
        // プレビュー環境が注入するFirebase設定や、認証トークンを含むスクリプトを排除
        const scripts = clone.querySelectorAll('script');
        scripts.forEach(s => {
            // アプリ本体のロジック（rawCocktailsを含む）は残す
            if (s.textContent.includes('rawCocktails')) {
                return;
            }
            // それ以外のスクリプトは原則削除（特にインラインスクリプト）
            // 念のため外部スクリプト(srcあり)は残すが、中身があるものは検査
            if (!s.src) {
                s.remove();
            }
        });

        // 3. 表示状態のリセット（動的生成された要素をクリア）
        // 検索結果リストをクリア
        const list = clone.querySelector('#cocktailList');
        if (list) list.innerHTML = '';
        // お気に入りリストをクリア
        const favList = clone.querySelector('#favList');
        if (favList) favList.innerHTML = '';
        // 検索結果件数をリセット
        const count = clone.querySelector('#searchResultCount');
        if (count) count.textContent = '0 items';
        // 入力値をリセット
        const input = clone.querySelector('#keywordInput');
        if (input) input.setAttribute('value', '');

        // 4. HTMLファイルとして保存
        const htmlContent = clone.outerHTML;
        const blob = new Blob([htmlContent], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'Cocktaily.html';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
});

function init() {
    renderPanels();
    setupEventListeners();
    updateResults();
}

function renderPanels() {
    els.baseGrid.innerHTML = '';
    els.typeGrid.innerHTML = '';
    els.styleGrid.innerHTML = '';
    els.flavorGrid.innerHTML = '';
    CONFIG.bases.forEach(item => els.baseGrid.appendChild(createPanel(item, 'base')));
    CONFIG.types.forEach(item => els.typeGrid.appendChild(createPanel(item, 'type')));
    CONFIG.styles.forEach(item => els.styleGrid.appendChild(createPanel(item, 'style')));
    CONFIG.flavors.forEach(item => {
        const p = createPanel(item, 'flavor');
        p.classList.add('flavor');
        els.flavorGrid.appendChild(p);
    });
}

function createPanel(text, type) {
    const div = document.createElement('div');
    div.className = 'panel';
    div.textContent = text;
    div.dataset.value = text;
    div.onclick = () => handleSelection(type, text, div, div.parentElement);
    return div;
}

function handleSelection(type, value, el, container) {
    if (el.classList.contains('disabled')) return;
    const isActive = el.classList.contains('active');
    if (type !== 'flavor') {
        Array.from(container.children).forEach(c => c.classList.remove('active'));
        if (isActive) { state[type] = null; } else { el.classList.add('active'); state[type] = value; }
    } else {
        if (isActive) { el.classList.remove('active'); state.flavors.delete(value); } 
        else { el.classList.add('active'); state.flavors.add(value); }
    }
    updatePanelAvailability();
    updateResults();
}

function updatePanelAvailability() {
    document.querySelectorAll('.panel').forEach(p => {
        const type = p.parentElement.id.replace('Grid', '');
        const val = p.dataset.value;
        if (p.classList.contains('active')) { p.classList.remove('disabled'); return; }
        const tempState = { ...state, flavors: new Set(state.flavors) };
        if (type === 'flavor') tempState.flavors.add(val); else tempState[type] = val;
        const exists = cocktails.some(c => {
            if (tempState.base && c.base !== tempState.base) return false;
            if (tempState.type && !c.styles.includes(tempState.type)) return false;
            if (tempState.style && !c.styles.includes(tempState.style)) return false;
            if (tempState.flavors.size > 0 && !Array.from(tempState.flavors).every(f => c.flavors.includes(f))) return false;
            return true;
        });
        p.classList.toggle('disabled', !exists);
    });
}

function setupEventListeners() {
    els.keywordInput.addEventListener('input', (e) => {
        state.keyword = e.target.value.toLowerCase().trim();
        updateResults();
    });

    els.searchResultCount.addEventListener('click', () => {
        if (els.viewSearch.classList.contains('active')) {
            els.menuHeading.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    });

    els.resetBtn.addEventListener('click', () => {
        if (els.viewFavorites.classList.contains('active')) {
            switchView('search');
        } else {
            state = { base: null, type: null, style: null, flavors: new Set(), keyword: '' };
            els.keywordInput.value = '';
            document.querySelectorAll('.panel').forEach(p => { p.classList.remove('active'); p.classList.remove('disabled'); });
            updateResults();
        }
    });

    els.favToggleBtn.addEventListener('click', () => {
        if (els.viewFavorites.classList.contains('active')) {
            switchView('search');
        } else {
            switchView('favorites');
        }
    });
}

function switchView(target) {
    const isSearch = target === 'search';
    els.viewSearch.classList.toggle('active', isSearch);
    els.viewFavorites.classList.toggle('active', !isSearch);
    if (isSearch) {
        els.resetBtn.textContent = 'RESET';
        els.favToggleBtn.classList.remove('active');
    } else {
        els.resetBtn.textContent = '閉じる';
        els.favToggleBtn.classList.add('active');
        updateFavorites();
    }
}

function createCard(c) {
    const isFav = favorites.has(c.id);
    const card = document.createElement('div');
    const isLong = c.styles.includes('ロング');
    card.className = `card ${isLong ? 'long' : 'short'}`;
    card.onclick = function() { this.classList.toggle('expanded'); };
    card.innerHTML = `
        <button class="fav-btn ${isFav ? 'active' : ''}" onclick="event.stopPropagation(); toggleFavorite('${c.id}')">
            <svg fill="${isFav ? 'currentColor' : 'none'}" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
            </svg>
        </button>
        <div class="card-left">
            <div class="card-header">
                <div class="cocktail-names">
                    <span class="name-jp">${c.jp}</span>
                    <span class="name-en">${c.en}</span>
                </div>
            </div>
            <div class="materials-preview">${c.materials}</div>
            <div class="card-details">
                <div class="detail-label">PROFILE</div>
                <div class="desc-text">${c.desc}</div>
                <div class="tags-row">
                    <span class="pill">${c.base}</span>
                    <span class="pill">${isLong?'ロング':'ショート'}</span>
                    ${c.flavors.map(f => `<span class="pill ${state.flavors.has(f)?'gold':''}">${f}</span>`).join('')}
                </div>
            </div>
        </div>
    `;
    return card;
}

function toggleFavorite(id) {
    if (favorites.has(id)) { favorites.delete(id); } else { favorites.add(id); }
    localStorage.setItem('barRecallFavs', JSON.stringify([...favorites]));
    updateResults();
    if (els.viewFavorites.classList.contains('active')) updateFavorites();
}

function updateResults() {
    const list = cocktails.filter(c => {
        if (state.keyword && !([c.jp, c.en, c.desc, c.materials, c.base].some(t => t.toLowerCase().includes(state.keyword)))) return false;
        if (state.base && c.base !== state.base) return false;
        if (state.type && !c.styles.includes(state.type)) return false;
        if (state.style && !c.styles.includes(state.style)) return false;
        /* 検索時もANDロジックでフィルタリング */
        if (state.flavors.size > 0 && !Array.from(state.flavors).every(f => c.flavors.includes(f))) return false;
        return true;
    });
    els.searchResultCount.textContent = `${list.length} items`;
    els.cocktailList.innerHTML = list.length === 0 ? '<div class="empty-state">一致するカクテルがありません</div>' : '';
    list.forEach(c => els.cocktailList.appendChild(createCard(c)));
}

function updateFavorites() {
    const list = cocktails.filter(c => favorites.has(c.id));
    els.favCount.textContent = `${list.length} SELECTIONS`;
    els.favList.innerHTML = list.length === 0 ? '<div class="empty-state">お気に入りが登録されていません</div>' : '';
    list.forEach(c => els.favList.appendChild(createCard(c)));
}

window.toggleFavorite = toggleFavorite;
init();
</script>
</body></html>